<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Runify ‚Äî Running Analytics</title>
  <meta name="description" content="Runify: upload your runs, get instant insights, and train smarter with AI.">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'%3E%3Ccircle cx='64' cy='64' r='64' fill='%23111A25'/%3E%3Cpath d='M31 81l14-23 12 8-9 15h33v10H31z' fill='%2308D1C7'/%3E%3Ccircle cx='72' cy='36' r='10' fill='%2308D1C7'/%3E%3C/svg%3E">
  <style>
    :root{
      --bg: #0b1220;
      --panel:#0F1726;
      --muted:#99A3B3;
      --text:#E7ECF3;
      --brand:#08D1C7;
      --brand-2:#46E8C1;
      --accent:#7B7FFE;
      --border: rgba(255,255,255,0.08);
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --radius:16px;
      --radius-sm:12px;
      --radius-xs:10px;
    }
    [data-theme="light"]{
      --bg:#f6f8fb;
      --panel:#ffffff;
      --muted:#475569;
      --text:#0f172a;
      --border: rgba(15,23,42,0.08);
      --shadow: 0 12px 30px rgba(2,8,23,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 10% -10%, rgba(70,232,193,.10), transparent 60%),
                  radial-gradient(1200px 600px at 110% 10%, rgba(123,127,254,.08), transparent 60%), var(--bg);
      color:var(--text);
      line-height:1.45;
    }
    a{color:inherit;text-decoration:none}
    .container{width:min(1120px, 92vw); margin-inline:auto}

    /* Navbar */
    .nav{
      position:sticky; top:0; z-index:50;
      backdrop-filter: saturate(160%) blur(8px);
      background: linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,0)) ;
      border-bottom:1px solid var(--border);
    }
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:16px 8px;}
    .brand{display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.3px}
    .brand-badge{
      width:36px; height:36px; border-radius:10px; display:grid; place-items:center;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      box-shadow: var(--shadow);
    }
    .brand-badge svg{width:22px; height:22px; color:#001015}
    .nav-links{display:flex; gap:18px; align-items:center}
    .pill{
      padding:10px 14px; border:1px solid var(--border); border-radius:999px; color:var(--muted);
    }
    .btn{
      border:none; border-radius:12px; padding:12px 16px; font-weight:700; cursor:pointer;
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color:#001015; box-shadow: var(--shadow);
    }
    .btn.secondary{
      background:transparent; color:var(--text); border:1px solid var(--border);
    }

    /* Hero */
    .hero{padding:72px 0 34px}
    .hero-grid{display:grid; grid-template-columns: 1.1fr .9fr; gap:28px; align-items:center}
    @media (max-width: 900px){ .hero-grid{grid-template-columns:1fr; padding-top:12px} }
    .h-title{
      font-size: clamp(30px, 4.4vw, 54px); line-height:1.08; margin:0 0 14px; font-weight:900;
    }
    .h-sub{color:var(--muted); font-size: clamp(14px, 1.6vw, 18px); margin-bottom:24px}
    .cta{display:flex; gap:12px; flex-wrap:wrap}
    .hero-card{
      border:1px solid var(--border); background:var(--panel); border-radius:var(--radius);
      padding:20px; box-shadow: var(--shadow);
    }
    .mock{
      display:grid; grid-template-columns:1fr 1fr; gap:12px;
    }
    .kpi{
      border:1px solid var(--border); padding:14px; border-radius:var(--radius-sm);
      background:linear-gradient(180deg, rgba(123,127,254,.10), rgba(8,209,199,.08));
    }
    .kpi h4{margin:6px 0 2px; font-size:14px; color:var(--muted); font-weight:600}
    .kpi p{margin:0; font-size:22px; font-weight:900}

    /* Upload (drag and drop) */
    .upload{
      margin:26px 0 0; padding:18px; border:1px dashed var(--border); border-radius:var(--radius-sm);
      display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap; color:var(--muted)
    }
    .upload input[type="file"]{display:none}
    .upload .label{border:1px solid var(--border); border-radius:10px; padding:10px 14px; cursor:pointer; color:var(--text)}
    .hint{font-size:13px; color:var(--muted)}

    /* fatures :) */
    .section{padding:56px 0}
    .grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:18px}
    @media (max-width: 900px){ .grid{grid-template-columns:1fr} }
    .card{
      border:1px solid var(--border); background:var(--panel); border-radius:var(--radius);
      padding:18px; box-shadow: var(--shadow); position:relative; overflow:hidden;
    }
    .card h3{margin:6px 0 6px}
    .eyebrow{font-size:12px; letter-spacing:.18em; color:var(--muted); text-transform:uppercase}
    .chip{display:inline-flex; align-items:center; gap:8px; border:1px solid var(--border); padding:8px 10px; border-radius:999px; color:var(--muted); font-size:12px}
    .icon{
      width:26px; height:26px; border-radius:8px; display:grid; place-items:center;
      background: linear-gradient(135deg, rgba(8,209,199,.22), rgba(123,127,254,.22));
      color:#cfe9ff;
    }

    /* Foot */
    .footer{
      margin-top:30px; padding:30px 0 60px; color:var(--muted); border-top:1px solid var(--border)
    }

    /* Dark mode switch */
    .switch{display:inline-flex; align-items:center; gap:10px; color:var(--muted)}
    .toggle{
      width:48px; height:28px; border-radius:999px; background:var(--panel); border:1px solid var(--border); position:relative; cursor:pointer;
    }
    .knob{position:absolute; top:3px; left:3px; width:22px; height:22px; border-radius:50%; background:linear-gradient(135deg, var(--brand-2), var(--brand)); transition:.22s}
    [data-theme="light"] .knob{transform: translateX(20px)}
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <span class="brand-badge" aria-hidden="true">
          <img src="/Users/jomarch/Documents/Runify/Runify/runify/static/Runify.png" alt="Runify Logo" style="width:30px;height:30px;border-radius:6px;object-fit:cover;" />
        </span>
        <span>Runify</span>
      </div>
      <nav class="nav-links">
        <a class="pill" href="#features">Features</a>
        <a class="pill" href="#upload">Upload</a>
        <a class="pill" href="#docs">Docs</a>
        <span class="switch" title="Toggle light/dark">
          <span>Theme</span>
          <span class="toggle" id="themeToggle"><span class="knob"></span></span>
        </span>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <main class="container hero">
    <div class="hero-grid">
      <section>
        <h1 class="h-title">Train smarter. <br> Train harder.</h1>
        <!-- didnt expect that now did ya ^^ -->
        <p class="h-sub">
          Runify turns your GPX/TCX/FIT data into clear insights‚Äîirregularity detection,
          pace & HR trends, and route intelligence. Private by default. Powerful when you need it.
        </p>
        <div class="cta">
          <button class="btn" id="btnConnect" title="Connect your account (set up later)">Connect Garmin / Strava</button>
          <button class="btn secondary" id="btnDemo">View Demo</button>
        </div>

        <div class="upload" id="upload" aria-describedby="uploadHint">
          <label class="label" for="fileInput">Upload .fit / .tcx / .gpx</label>
          <input id="fileInput" type="file" accept=".fit,.tcx,.gpx" />
          <span class="hint" id="uploadHint">Drag & drop files here or click to browse</span>
        </div>
      </section>

      <aside class="hero-card">
        <div class="mock">
          <div class="kpi">
            <h4>Last Run</h4>
            <p>4.21 mi</p>
            <div class="hint">Pace 8:12 /mi ‚Ä¢ HR 153</div>
          </div>
          <div class="kpi">
            <h4>VO‚ÇÇ Trend</h4>
            <p>+2.1%</p>
            <div class="hint">14-day moving avg</div>
          </div>
          <div class="kpi">
            <h4>Irregularities</h4>
            <p>Low</p>
            <div class="hint">No anomalies flagged</div>
          </div>
          <div class="kpi">
            <h4>Load Balance</h4>
            <p>Optimal</p>
            <div class="hint">Acute/Chronic 0.92</div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- FEATURES -->
  <section class="container section" id="features">
    <div class="grid">
      <article class="card">
        <span class="eyebrow">Analysis</span>
        <h3>Irregularity Finder</h3>
        <p>Detects sudden shifts in HR, cadence, or pace with context-aware thresholds.</p>
        <span class="chip"><span class="icon">‚ö°</span> Real-time flags</span>
      </article>
      <article class="card">
        <span class="eyebrow">Routes</span>
        <h3>Route Intelligence</h3>
        <p>Compare efforts on recurring routes‚Äînormalized for weather and elevation.</p>
        <span class="chip"><span class="icon">üó∫Ô∏è</span> Terrain-aware splits</span>
      </article>
      <article class="card">
        <span class="eyebrow">Privacy</span>
        <h3>Private by Default</h3>
        <p>Your data stays yours. Fine-grained controls for sharing and exporting.</p>
        <span class="chip"><span class="icon">üîí</span> Local-first mindset</span>
      </article>
    </div>
  </section>

  <!-- PREVIEW -->
  <section class="container section" id="docs">
    <div class="grid">
      <div class="card">
        <h3>Dashboard</h3>
        <p>Clean overview of mileage, load and readiness‚Äîdesigned for daily use.</p>
        <div class="hint">Hook to <code>/dashboard</code></div>
      </div>
      <div class="card">
        <h3>Activity Details</h3>
        <p>Interactive map, lap table, and cadence/HR charts with anomaly overlays.</p>
        <div class="hint">Hook to <code>/activity/&lt;id&gt;</code></div>
      </div>
      <div class="card">
        <h3>Coach</h3>
        <p>Adaptive suggestions based on your trends, goals, and recovery window.</p>
        <div class="hint">Future: <code>/coach</code></div>
      </div>
    </div>
  </section>

  <footer class="container footer">
    <div style="display:flex; justify-content:space-between; gap:16px; flex-wrap:wrap;">
      <div>¬© <span id="y"></span> Runify. All rights reserved.</div>
      <div class="hint">Made for runners. Built with love & science.</div>
    </div>
  </footer>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Theme toggle
    const toggle = document.getElementById('themeToggle');
    const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
    const saved = localStorage.getItem('theme');
    if(saved){ document.documentElement.setAttribute('data-theme', saved); }
    else if(prefersLight){ document.documentElement.setAttribute('data-theme', 'light'); }
    toggle.addEventListener('click', ()=>{
      const cur = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', cur);
      localStorage.setItem('theme', cur);
    });

    // Demo buttons (set up later)
    document.getElementById('btnConnect').addEventListener('click', ()=>{
      alert('Connect flow goes here (OAuth to Garmin/Strava)');
      // window.location.href = '/connect'; // later
    });
    document.getElementById('btnDemo').addEventListener('click', ()=>{
      alert('Demo route to a sample dashboard');
      // window.location.href = '/demo';
    });

    // Drag & drop upload (this is mighty cool)
    const drop = document.querySelector('.upload');
    const fileInput = document.getElementById('fileInput');
    ['dragenter','dragover'].forEach(ev => drop.addEventListener(ev, e=>{
      e.preventDefault(); e.stopPropagation(); drop.style.borderColor='var(--brand)'; drop.style.background='rgba(8,209,199,.06)';
    }));
    ['dragleave','drop'].forEach(ev => drop.addEventListener(ev, e=>{
      e.preventDefault(); e.stopPropagation(); drop.style.borderColor='var(--border)'; drop.style.background='transparent';
    }));
    drop.addEventListener('drop', e=>{
      const files = e.dataTransfer.files;
      if(files?.length){ handleFiles(files); }
    });
    drop.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', ()=> handleFiles(fileInput.files));

    function handleFiles(files){
      const f = files[0];
      if(!f) return;
      const ok = ['.fit','.tcx','.gpx'].some(ext => f.name.toLowerCase().endsWith(ext));
      if(!ok){ alert('Please upload a .fit, .tcx, or .gpx file.'); return; }
      // Send to flask, sorry Julian, idk fast api or whatever yet
      const form = new FormData(); form.append('file', f);
      fetch('/upload', { method:'POST', body:form })
        .then(r => r.ok ? r.json() : Promise.reject(r))
        .then(data => {
          alert('Upload successful! Redirecting to activity‚Ä¶');
          // window.location.href = `/activity/${data.activity_id}`;
        })
        .catch(()=> alert('Upload failed. Try again.'));
    }
  </script>
</body>
</html>
